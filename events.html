<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Events | Wonders Tabernacle Church</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="font-sans text-gray-800">

  <!-- HEADER -->
  <header class="bg-gradient-to-r from-blue-800 to-blue-600 text-white shadow-md w-full">
    <div class="container mx-auto flex justify-between items-center py-4 px-6">
      <h1 class="text-2xl font-bold"> <img src="logo.png" alt="Wonders Tabernacle Logo" class="inline-block h-8 w-8 mr-2 align-middle">
        Wonders Tabernacle</h1>
      <nav class="space-x-6 font-medium">
        <a href="index.html" class="hover:text-yellow-400">Home</a>
        <a href="about.html" class="hover:text-yellow-400">About</a>
        <a href="pastor.html" class="hover:text-yellow-400">Pastor's Corner</a>
        <a href="sanctuary.html" class="hover:text-yellow-400">New Sanctuary</a>
        <a href="sermons.html" class="hover:text-yellow-400">Sermons</a>
        <a href="events.html" class="text-yellow-400 font-semibold">Events</a>
        <a href="giving.html" class="hover:text-yellow-400">Giving</a>
        <a href="contact.html" class="hover:text-yellow-400">Contact</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="h-72 bg-cover bg-center flex items-center justify-center text-white"
    style="background-image: url('events-hero.jpg');">
    <div class="bg-black bg-opacity-50 p-6 rounded-lg text-center">
      <h2 class="text-4xl font-bold mb-2">Church Events</h2>
      <p class="text-lg">Join us in worship, fellowship, and special gatherings</p>
    </div>
  </section>

  <!-- DYNAMIC CALENDAR -->
  <section class="py-16 px-6 container mx-auto">
    <h3 class="text-3xl font-bold text-blue-700 mb-10 text-center">Event Calendar</h3>
    <div class="flex justify-center mb-6 gap-4 flex-wrap">
      <button onclick="prevMonth()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800">◀ Prev</button>
      <h4 id="monthYear" class="text-xl font-semibold self-center"></h4>
      <button onclick="nextMonth()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800">Next ▶</button>
    </div>
    <div class="grid grid-cols-7 gap-2 text-center font-medium bg-gray-200 p-2 rounded">
      <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
    </div>
    <div class="grid grid-cols-7 gap-2 mt-2" id="calendar"></div>
  </section>

  <!-- UPCOMING EVENTS -->
  <section class="py-16 px-6 container mx-auto">
    <h3 class="text-3xl font-bold text-blue-700 mb-10 text-center">Upcoming Events</h3>
    <div id="upcoming-events" class="grid md:grid-cols-3 gap-8"></div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-blue-900 text-white py-10 mt-12">
    <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
      <div>
        <h4 class="font-bold mb-3"> <img src="logo.png" alt="Wonders Tabernacle Logo" class="inline-block h-12 w-12 mr-2 align-middle">
         Contact Us</h4>
        <p>Nairobi, Kenya</p>
        <p>Email: 
  <a href="mailto:info@wonderschurch.org" class="text-blue-300 hover:underline">
    info@wonderschurch.org
  </a>
</p>

        <p>Phone: +254 700 123 456</p>
      </div>
      <div>
        <h4 class="font-bold mb-3">Quick Links</h4>
        <p><a href="about.html">About</a> | <a href="sermons.html">Sermons</a> | <a href="giving.html">Giving</a></p>
      </div>
      <div>
        <h4 class="font-bold mb-3">Follow Us</h4>
        <p>Facebook | YouTube | Instagram | WhatsApp</p>
      </div>
    </div>
    <p class="text-center text-sm mt-6">&copy; 2025 Wonders Tabernacle Church. All rights reserved.</p>
  </footer>

  <!-- Calendar Script -->
  <script>
    let currentDate = new Date();

    const API_KEY = "AIzaSyAOsZy68tf3rZJOBuUeChrj3IcDnvmYWOo"; // Replace with your API key
    const SHEET_ID = "1V0CO130JIrfpuUbXn4JsPVUJ7YsTJ1c5nt4bt7bbNVo"; // Replace with your Google Sheet ID
    const RANGE = "Sheet1!A:G"; // A = Date, B = Name, C = Color, D = Time, E = Venue, F = Day, G = Description

    async function fetchEvents() {
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`;
      try {
        const response = await fetch(url);
        const data = await response.json();
        if (!data.values) return [];
        // Skip header row
        return data.values.slice(1).map(row => ({
          date: row[0],
          name: row[1],
          color: row[2] || 'bg-gray-500',
          time: row[3] || '',
          venue: row[4] || '',
          day: row[5] || '',
          description: row[6] || ''
        }));
      } catch (error) {
        console.error("Error fetching events:", error);
        return [];
      }
    }

    async function renderCalendar() {
      const events = await fetchEvents();
      const calendar = document.getElementById("calendar");
      const upcomingContainer = document.getElementById("upcoming-events");
      calendar.innerHTML = "";
      upcomingContainer.innerHTML = "";

      const month = currentDate.getMonth();
      const year = currentDate.getFullYear();
      document.getElementById("monthYear").innerText = currentDate.toLocaleDateString("en-US", { month: "long", year: "numeric" });

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      // Empty slots for first week
      for(let i=0;i<firstDay;i++){
        calendar.innerHTML += `<div class="p-2"></div>`;
      }

      // Populate calendar days
      for(let day=1; day<=daysInMonth; day++){
        const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
        let dayEvents = events.filter(e => e.date === dateStr);
        let eventHTML = dayEvents.map(e => 
          `<div class="${e.color} text-white text-xs rounded p-1 mt-1">
            <strong>${e.name}</strong><br/>
            ${e.time ? e.time + ' | ' : ''}${e.venue}<br/>
            <span class="text-[10px]">${e.description}</span>
          </div>`
        ).join('');
        calendar.innerHTML += `
          <div class="p-2 min-h-20 border border-gray-300 rounded transition hover:shadow-lg">
            <div class="font-semibold">${day}</div>
            ${eventHTML}
          </div>`;
      }

      // Populate upcoming events
      const upcomingEvents = events.sort((a,b) => new Date(a.date) - new Date(b.date));
      upcomingContainer.innerHTML = upcomingEvents.map(e => `
        <div class="bg-white shadow-lg rounded-lg p-6 hover:shadow-2xl transition">
          <h4 class="text-xl font-bold ${e.color} mb-2">${e.name}</h4>
          <p class="text-gray-600">${e.day} | ${e.time} | ${e.venue}</p>
          <p class="mt-4 text-gray-700">${e.description}</p>
        </div>
      `).join('');
    }

    function prevMonth() { currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(); }
    function nextMonth() { currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(); }

    renderCalendar();
  </script>

</body>
</html>
